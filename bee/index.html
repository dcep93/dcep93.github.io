<div style="height: 99vh; display: flex">
    <form id="form"><input id="input" /><input hidden type="submit" /></form>
    <pre style="flex-grow: 1; display: flex" id="output"></pre>
</div>
<script>
    document.getElementById("form").onsubmit = (e) =>
        Promise.resolve(e.preventDefault())
        .then(() => fetch("./sowpods.txt"))
        .then((resp) => resp.text())
        .then((txt) => ({
            txt,
            input: document.getElementById("input"),
            output: document.getElementById("output"),
        }))
        .then((obj) => ({
            ...obj,
            regex: new RegExp(
                `^[${obj.input.value}]*${obj.input.value[0]}[${obj.input.value}]*$`,
                "mg"
            ),
        }))
        .then((obj) => ({
            ...obj,
            raw_found: Array.from(obj.txt.matchAll(obj.regex))
                .filter((w) => w.length > 3)
                .join("\n") || "<none>",
        }))
        .then((obj) => ({
            ...obj,
            found: obj.raw_found.length === 0 ? ["<none>"] : obj.raw_found,
        }))
        .then((obj) => ({
            obj,
            promises: obj.found.map((word) =>
                Promise.resolve()
                .then(() => document.createElement("span"))
                .then((span) =>
                    Promise.resolve()
                    .then(() => (span.style = ""))
                    .then(() => (span.innerText = word))
                )
            ),
        }))
        .then((obj) =>
            Promise.resolve()
            .then(() => Promise.all(Promise.resolve(obj), ...obj.promises))
            .then((ps) => ps[0])
        )
        .then((obj) => [obj, console.log(obj)][0])
        .catch((err) => {
            alert(err);
            throw err;
        });
</script>